import{r as n,R as f}from"./app-DdEvTftV.js";import{n as y,K as X,y as _,t as ee,u as re,i as S,o as R,L as ne,O as ve,v as he,p as me,z as x,k as te,x as pe,B as be,R as ge,C as we,j as Ee}from"./portal-Crollj4X.js";function Re(){let e=n.useRef(!1);return y(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function le(e){var r;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||((r=e.as)!=null?r:ae)!==n.Fragment||f.Children.count(e.children)===1}let N=n.createContext(null);N.displayName="TransitionContext";var Ce=(e=>(e.Visible="visible",e.Hidden="hidden",e))(Ce||{});function Te(){let e=n.useContext(N);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function $e(){let e=n.useContext(z);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let z=n.createContext(null);z.displayName="NestingContext";function U(e){return"children"in e?U(e.children):e.current.filter(({el:r})=>r.current!==null).filter(({state:r})=>r==="visible").length>0}function ie(e,r){let t=he(e),a=n.useRef([]),C=Re(),P=me(),v=R((s,l=x.Hidden)=>{let u=a.current.findIndex(({el:i})=>i===s);u!==-1&&(te(l,{[x.Unmount](){a.current.splice(u,1)},[x.Hidden](){a.current[u].state="hidden"}}),P.microTask(()=>{var i;!U(a)&&C.current&&((i=t.current)==null||i.call(t))}))}),T=R(s=>{let l=a.current.find(({el:u})=>u===s);return l?l.state!=="visible"&&(l.state="visible"):a.current.push({el:s,state:"visible"}),()=>v(s,x.Unmount)}),p=n.useRef([]),d=n.useRef(Promise.resolve()),h=n.useRef({enter:[],leave:[]}),b=R((s,l,u)=>{p.current.splice(0),r&&(r.chains.current[l]=r.chains.current[l].filter(([i])=>i!==s)),r==null||r.chains.current[l].push([s,new Promise(i=>{p.current.push(i)})]),r==null||r.chains.current[l].push([s,new Promise(i=>{Promise.all(h.current[l].map(([$,L])=>L)).then(()=>i())})]),l==="enter"?d.current=d.current.then(()=>r==null?void 0:r.wait.current).then(()=>u(l)):u(l)}),g=R((s,l,u)=>{Promise.all(h.current[l].splice(0).map(([i,$])=>$)).then(()=>{var i;(i=p.current.shift())==null||i()}).then(()=>u(l))});return n.useMemo(()=>({children:a,register:T,unregister:v,onStart:b,onStop:g,wait:d,chains:h}),[T,v,a,b,g,h,d])}let ae=n.Fragment,se=ve.RenderStrategy;function Fe(e,r){var t,a;let{transition:C=!0,beforeEnter:P,afterEnter:v,beforeLeave:T,afterLeave:p,enter:d,enterFrom:h,enterTo:b,entered:g,leave:s,leaveFrom:l,leaveTo:u,...i}=e,[$,L]=n.useState(null),o=n.useRef(null),w=le(e),F=_(...w?[o,r,L]:r===null?[]:[r]),G=(t=i.unmount)==null||t?x.Unmount:x.Hidden,{show:m,appear:Q,initial:V}=Te(),[E,B]=n.useState(m?"visible":"hidden"),Y=$e(),{register:k,unregister:M}=Y;y(()=>k(o),[k,o]),y(()=>{if(G===x.Hidden&&o.current){if(m&&E!=="visible"){B("visible");return}return te(E,{hidden:()=>M(o),visible:()=>k(o)})}},[E,o,k,M,m,G]);let D=ee();y(()=>{if(w&&D&&E==="visible"&&o.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[o,E,D,w]);let oe=V&&!Q,Z=Q&&m&&V,I=n.useRef(!1),j=ie(()=>{I.current||(B("hidden"),M(o))},Y),q=R(K=>{I.current=!0;let A=K?"enter":"leave";j.onStart(o,A,O=>{O==="enter"?P==null||P():O==="leave"&&(T==null||T())})}),J=R(K=>{let A=K?"enter":"leave";I.current=!1,j.onStop(o,A,O=>{O==="enter"?v==null||v():O==="leave"&&(p==null||p())}),A==="leave"&&!U(j)&&(B("hidden"),M(o))});n.useEffect(()=>{w&&C||(q(m),J(m))},[m,w,C]);let ce=!(!C||!w||!D||oe),[,c]=pe(ce,$,m,{start:q,end:J}),de=be({ref:F,className:((a=we(i.className,Z&&d,Z&&h,c.enter&&d,c.enter&&c.closed&&h,c.enter&&!c.closed&&b,c.leave&&s,c.leave&&!c.closed&&l,c.leave&&c.closed&&u,!c.transition&&m&&g))==null?void 0:a.trim())||void 0,...ge(c)}),H=0;E==="visible"&&(H|=S.Open),E==="hidden"&&(H|=S.Closed),c.enter&&(H|=S.Opening),c.leave&&(H|=S.Closing);let fe=ne();return f.createElement(z.Provider,{value:j},f.createElement(Ee,{value:H},fe({ourProps:de,theirProps:i,defaultTag:ae,features:se,visible:E==="visible",name:"Transition.Child"})))}function xe(e,r){let{show:t,appear:a=!1,unmount:C=!0,...P}=e,v=n.useRef(null),T=le(e),p=_(...T?[v,r]:r===null?[]:[r]);ee();let d=re();if(t===void 0&&d!==null&&(t=(d&S.Open)===S.Open),t===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[h,b]=n.useState(t?"visible":"hidden"),g=ie(()=>{t||b("hidden")}),[s,l]=n.useState(!0),u=n.useRef([t]);y(()=>{s!==!1&&u.current[u.current.length-1]!==t&&(u.current.push(t),l(!1))},[u,t]);let i=n.useMemo(()=>({show:t,appear:a,initial:s}),[t,a,s]);y(()=>{t?b("visible"):!U(g)&&v.current!==null&&b("hidden")},[t,g]);let $={unmount:C},L=R(()=>{var F;s&&l(!1),(F=e.beforeEnter)==null||F.call(e)}),o=R(()=>{var F;s&&l(!1),(F=e.beforeLeave)==null||F.call(e)}),w=ne();return f.createElement(z.Provider,{value:g},f.createElement(N.Provider,{value:i},w({ourProps:{...$,as:n.Fragment,children:f.createElement(ue,{ref:p,...$,...P,beforeEnter:L,beforeLeave:o})},theirProps:{},defaultTag:n.Fragment,features:se,visible:h==="visible",name:"Transition"})))}function Pe(e,r){let t=n.useContext(N)!==null,a=re()!==null;return f.createElement(f.Fragment,null,!t&&a?f.createElement(W,{ref:r,...e}):f.createElement(ue,{ref:r,...e}))}let W=X(xe),ue=X(Fe),Se=X(Pe),Oe=Object.assign(W,{Child:Se,Root:W});function ye({title:e,titleId:r,...t},a){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":r},t),e?n.createElement("title",{id:r},e):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const ke=n.forwardRef(ye);export{ke as F,Se as a,Re as f,Oe as z};
