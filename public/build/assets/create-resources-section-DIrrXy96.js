import{r as w,j as r,s as n}from"./app-DnUJiSgj.js";import{B as m}from"./button-BBhBH3Wg.js";import{I as C}from"./input-B3sJQlNd.js";import{M as R}from"./modal-CcT6HOge.js";import{c as y,g as E}from"./resources-thunk-CcSKDwSf.js";import{h as k}from"./moment-G82_0lEo.js";import{u as v}from"./index.esm-vgltvwHi.js";import{S as c}from"./sweetalert2.esm.all-EtYCW2yB.js";import"./index-u-LQmTMg.js";import"./transition-pTFtL-q3.js";import"./use-server-handoff-complete-Q_TOZDbj.js";function U(){var t;const{register:u,handleSubmit:l,setError:p,reset:f,formState:{errors:d,isSubmitting:h}}=v(),[g,s]=w.useState(!1),x=async o=>{var a,i;console.log("Form Data:",o);try{await n.dispatch(y({...o,resource_id:`RSC${k().format("MMDDYYYYHHmmss")}`})),await n.dispatch(E()),c.fire({icon:"success",title:"Your work has been saved",showConfirmButton:!1,timer:1500}),f(),s(!1)}catch(e){if((i=(a=e==null?void 0:e.response)==null?void 0:a.data)!=null&&i.errors){const S=e.response.data.errors;Object.entries(S).forEach(([b,j])=>{p(b,{type:"manual",message:j[0]})})}else c.fire({icon:"error",title:"Unexpected Error",text:(e==null?void 0:e.message)||"Something went wrong"})}};return r.jsxs("div",{children:[r.jsx(m,{onClick:()=>s(!0),variant:"danger",type:"button",children:"Create Resources"}),r.jsx(R,{onClose:()=>s(!1),isOpen:g,title:"Create Resources",children:r.jsxs("form",{onSubmit:l(x),className:"flex w-full flex-col gap-5",children:[r.jsx(C,{label:"Resources Name",name:"name",register:u("name",{required:"Resource Name is required"}),type:"text",error:(t=d.name)==null?void 0:t.message}),r.jsx(m,{loading:h,variant:"danger",type:"submit",children:"Submit"})]})})]})}export{U as default};
