import{r as y,j as r,s as u}from"./app-C-aUlY8V.js";import{B as l}from"./button-5KyY-Dao.js";import{I as p}from"./input-CI6JfF7n.js";import{M as _}from"./modal-CCGktlD5.js";import{c as C,g as E}from"./resources-thunk-BTyGV3md.js";import{u as v}from"./index.esm-BEu8qHYA.js";import{S as d}from"./sweetalert2.esm.all-DV3w3JmD.js";import"./index-Yej_txPt.js";import"./transition-CiLdT7lh.js";import"./use-server-handoff-complete-DSiUTCoF.js";function Y(){var a,i;const{register:t,handleSubmit:f,setError:g,reset:x,formState:{errors:o,isSubmitting:h}}=v(),[b,s]=y.useState(!1),S=async n=>{var m,c;console.log("Form Data:",n);try{await u.dispatch(C(n)),await u.dispatch(E()),d.fire({icon:"success",title:"Your work has been saved",showConfirmButton:!1,timer:1500}),x(),s(!1)}catch(e){if((c=(m=e==null?void 0:e.response)==null?void 0:m.data)!=null&&c.errors){const j=e.response.data.errors;Object.entries(j).forEach(([w,R])=>{g(w,{type:"manual",message:R[0]})})}else d.fire({icon:"error",title:"Unexpected Error",text:(e==null?void 0:e.message)||"Something went wrong"})}};return r.jsxs("div",{children:[r.jsx(l,{onClick:()=>s(!0),variant:"danger",type:"button",children:"Create Resources"}),r.jsx(_,{onClose:()=>s(!1),isOpen:b,title:"Create Resources",children:r.jsxs("form",{onSubmit:f(S),className:"flex w-full flex-col gap-5",children:[r.jsx(p,{label:"Resources ID",name:"resource_id",register:t("resource_id",{required:"Resource ID is required"}),type:"text",error:(a=o.resource_id)==null?void 0:a.message}),r.jsx(p,{label:"Resources Name",name:"name",register:t("name",{required:"Resource Name is required"}),type:"text",error:(i=o.name)==null?void 0:i.message}),r.jsx(l,{loading:h,variant:"danger",type:"submit",children:"Submit"})]})})]})}export{Y as default};
