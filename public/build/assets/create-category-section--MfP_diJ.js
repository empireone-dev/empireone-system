import{r as w,j as r,s as l}from"./app-C1w-TtOr.js";import{B as g}from"./button-BmjMCNt3.js";import{I as p}from"./input-CAWC_4nN.js";import{M as _}from"./modal-DIAAsUoJ.js";import{c as E,g as v}from"./categories-thunk-DyDLzcA5.js";import{u as k}from"./index.esm-DhAXDiYz.js";import{S as u}from"./sweetalert2.esm.all-DV3w3JmD.js";import"./index-CI9TuP14.js";import"./transition-BFWKUHip.js";import"./use-server-handoff-complete-CnImzUEM.js";function Y(){var o,i;const{register:s,handleSubmit:d,setError:f,reset:x,formState:{errors:a,isSubmitting:y}}=k(),[h,t]=w.useState(!1),C=async n=>{var m,c;console.log("Form Data:",n);try{await l.dispatch(E(n)),await l.dispatch(v()),u.fire({icon:"success",title:"Your work has been saved",showConfirmButton:!1,timer:1500}),x(),t(!1)}catch(e){if((c=(m=e==null?void 0:e.response)==null?void 0:m.data)!=null&&c.errors){const b=e.response.data.errors;Object.entries(b).forEach(([S,j])=>{f(S,{type:"manual",message:j[0]})})}else u.fire({icon:"error",title:"Unexpected Error",text:(e==null?void 0:e.message)||"Something went wrong"})}};return r.jsxs("div",{children:[r.jsx(g,{onClick:()=>t(!0),variant:"danger",type:"button",children:"Create Category"}),r.jsx(_,{onClose:()=>t(!1),isOpen:h,title:"Create Category",children:r.jsxs("form",{onSubmit:d(C),className:"flex w-full flex-col gap-5",children:[r.jsx(p,{label:"Category ID",name:"category_id",register:s("category_id",{required:"Category ID is required"}),type:"text",error:(o=a.category_id)==null?void 0:o.message}),r.jsx(p,{label:"Category Name",name:"name",register:s("name",{required:"Category Name is required"}),type:"text",error:(i=a.name)==null?void 0:i.message}),r.jsx(g,{loading:y,variant:"danger",type:"submit",children:"Submit"})]})})]})}export{Y as default};
