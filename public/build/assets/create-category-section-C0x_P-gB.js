import{r as w,u as y,j as e,s as S}from"./app-DtHcrryA.js";import{u as b,S as m}from"./swal-D--Hb2A3.js";import{U as C,D}from"./react-draft-wysiwyg-DqcVqi6c.js";import{B as l}from"./button-C809t_3e.js";import{M as P}from"./modal-CZ6Gtrbw.js";import{I as p}from"./input-DJmG43is.js";import"./moment-G82_0lEo.js";import"./search-lib-CUdHKsvq.js";import{c as _,g as k}from"./categories-thunk-Cl6FMfJx.js";import"./sweetalert2.esm.all-EtYCW2yB.js";import"./index-Bi2p5L2n.js";import"./transition-yQlSiSYU.js";const{Dragger:V}=C,{RangePicker:$}=D;function z(){var n;const[d,a]=w.useState(!1),{sites:u}=y(r=>r.sites),t=new URLSearchParams(window.location.search).get("department")??"",{register:f,handleSubmit:g,control:v,formState:{errors:s,isSubmitting:i},reset:x}=b({defaultValues:{department:t}});async function h(r){const c=new FormData;Object.entries(r).forEach(([o,j])=>{c.append(o,j??"")});try{await _(c),await S.dispatch(k({department:t})),await m({type:"success"}),x(),a(!1)}catch(o){await m({type:"error",title:o.response.data.message})}}return console.log("sites",u),e.jsxs(e.Fragment,{children:[e.jsx(l,{onClick:()=>a(!0),children:"Create Account"}),e.jsx(P,{width:"max-w-lg",isOpen:d,onClose:a,title:`Create ${t} Account`,children:e.jsxs("form",{onSubmit:g(h),className:"flex flex-col gap-4",children:[e.jsx("div",{className:"flex gap-4",children:e.jsxs("div",{className:"flex-1 flex flex-col gap-4",children:[e.jsx(p,{label:"Department",type:"text",name:"station",disabled:!0,value:t}),e.jsx(p,{label:"Category Name",type:"text",name:"name",error:(n=s==null?void 0:s.name)==null?void 0:n.message,register:f("name",{required:"This field is required"})})]})}),e.jsx(l,{type:"submit",loading:i,disabled:i,children:"SUBMIT"})]})})]})}export{z as default};
