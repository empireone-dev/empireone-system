import{r as d,j as r,s as p}from"./app-C1w-TtOr.js";import{B as f}from"./button-BmjMCNt3.js";import{I as g}from"./input-CAWC_4nN.js";import{M as E}from"./modal-DIAAsUoJ.js";import{u as q,g as v}from"./resources-thunk-BC5P5rIF.js";import{u as I}from"./index.esm-DhAXDiYz.js";import{S as x}from"./sweetalert2.esm.all-DV3w3JmD.js";import"./index-CI9TuP14.js";import"./transition-BFWKUHip.js";import"./use-server-handoff-complete-CnImzUEM.js";function z({data:t}){var m,u;const{register:i,handleSubmit:h,setError:y,reset:s,formState:{errors:n,isSubmitting:b}}=I({defaultValues:{resource_id:t.resource_id,name:t.name}}),[o,a]=d.useState(!1);d.useEffect(()=>{o&&s({resource_id:t.resource_id,name:t.name})},[o,t,s]);const S=async _=>{var c,l;try{await p.dispatch(q({id:t.id,..._})),await p.dispatch(v()),x.fire({icon:"success",title:"Category updated",showConfirmButton:!1,timer:1500}),s(),a(!1)}catch(e){if((l=(c=e==null?void 0:e.response)==null?void 0:c.data)!=null&&l.errors){const j=e.response.data.errors;Object.entries(j).forEach(([C,w])=>{y(C,{type:"manual",message:w[0]})})}else x.fire({icon:"error",title:"Unexpected Error",text:(e==null?void 0:e.message)||"Something went wrong"})}};return r.jsxs("div",{children:[r.jsx(f,{onClick:()=>a(!0),variant:"outline",type:"button",className:"border-red-500 text-red-500",children:"Update"}),r.jsx(E,{onClose:()=>{s(),a(!1)},isOpen:o,title:"Update Category",children:r.jsxs("form",{onSubmit:h(S),className:"flex w-full flex-col gap-5",children:[r.jsx(g,{label:"Category ID",name:"resource_id",register:i("resource_id",{required:"Category ID is required"}),type:"text",error:(m=n.resource_id)==null?void 0:m.message}),r.jsx(g,{label:"Category Name",name:"name",register:i("name",{required:"Category Name is required"}),type:"text",error:(u=n.name)==null?void 0:u.message}),r.jsx(f,{loading:b,variant:"danger",type:"submit",children:"Submit"})]})})]})}export{z as default};
